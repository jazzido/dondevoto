<!doctype html>
<head>
  <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
  <script type="text/javascript" src="static/markerclusterer.js"></script>
  <script type="text/javascript" src="static/jquery-2.0.3.js"></script>
  <script type="text/javascript" src="static/underscore-min.js"></script>
  <script type="text/javascript" src="static/gmaps.js"></script>
  <script type="text/javascript" src="static/dondevoto.js"></script>
  <link rel="stylesheet" href="static/dondevoto.css" type="text/css" media="screen" />
  <title>dondevoto</title>
</head>
<body>
  <div id="container">
    <label for="distrito">Distrito:</label>
    <select id="distrito">
      {% for p, ds in provincias_distritos.iteritems() %}
      <optgroup label="{{ p.1|e }}">
        {% for id, d, count in ds %}
        <option value="{{p.0}}-{{id}}">{{d}} ({{count}})</option>
        {% endfor %}
      </optgroup>
      {% endfor %}
    </select>
    <div id="map-container">
      <div id="map">
      </div>
    </div>
    <table id="establecimientos">
    </table>
  </div>

  <script type="text/template" id="establecimientos-template">
      <thead>
        <tr>
          <th>Establecimiento</th>
          <th>Dirección</th>
          <th>Localidad</th>
          <th>Circuito</th>
        </tr>
      </thead>
      <tbody>
        <% _.each(establecimientos, function(e) { console.log(e);%>
        <tr class="establecimiento" data-establecimiento-id="<%- e.id %>">
          <td><%- e.establecimiento %></td>
          <td><%- e.direccion %></td>
          <td><%- e.localidad %></td>
          <td><%- e.circuito %></td>
        </tr>
        <% }); %>
      </tbody>
  </script>

  <script type="text/template" id="matches-template">
    <tr class="matches">
      <td colspan="5">
      <table>
        <% _.each(matches, function(e) {  %>
        <tr>
          <td><input type="checkbox" <% if (e.is_match == 1) { %>checked="checked"<% } %>></td>
          <td><%- e.nombre %></td>
          <td><%- e.ndomiciio %></td>
          <td><%- e.localidad %></td>
          <td><%- (e.score * 100).toFixed(3) %></td>
        </tr>
        <% }); %>
      </table>
      </td>
    </tr>
  </script>

  <script type="text/template" id="infowindow-template">
    <div style="font-size: 0.7em">
      <strong><%- place.nombre %></strong><br>
      <span style="font-size: 0.9em">
        Dirección: <%- place.ndomiciio %> — Localidad: <%- place.localidad %><br>
        <%- place.provincia %>
      </span>
    </div>
  </script>

  <script type="text/javascript">
  </script>

</body>
